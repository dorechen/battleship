(this["webpackJsonpbattleship-game-engine"]=this["webpackJsonpbattleship-game-engine"]||[]).push([[0],{20:function(t,e,n){},27:function(t,e,n){},28:function(t,e,n){"use strict";n.r(e);var r=n(1),i=n(0),c=n.n(i),a=n(6),s=n.n(a),o=(n(20),n(14)),h=n(5),u=n(3),l=n(8),d=Object(l.b)({name:"ships",initialState:{board:null,ships:[],shipsLeft:0},reducers:{isHit:function(t,e){var n=e.payload,r=n.y,i=n.x;t.ships.find((function(t){return r===t.y&&i===t.x})).isHit=!0,t.board[r][i]="x",t.shipsLeft=Object(h.a)(new Set(t.ships.filter((function(t){return!t.isHit})).map((function(t){return t.key})))).length},isMiss:function(t,e){var n=e.payload,r=n.y,i=n.x;t.board[r][i]="o"},createGame:function(t,e){t.board=Array.from(Array(8),(function(){return new Array(8).fill(" ")})),t.ships=e.payload,t.shipsLeft=Object(h.a)(new Set(e.payload.map((function(t){return t.key})))).length}}}),j=d.actions,b=j.isHit,f=j.isMiss,y=j.createGame,p=function(t){return t.ships.ships},x=function(t){return t.ships.shipsLeft},O=function(t){return t.ships.board},m=d.reducer,v=(n(27),function(t,e){for(var n=e.size,r=e.key,i=[Math.floor(Math.random()*(t.y-n)),Math.floor(Math.random()*(t.x-n))],c=Math.random()<.5,a=[],s=0;s<n;s++)c?a.push({y:i[0],x:i[1]+s,key:r,isHit:!1}):a.push({y:i[0]+s,x:i[1],key:r,isHit:!1});return a}),g=function(t,e){if(0===t.length)return!1;for(var n=0;n<t.length;n++)for(var r=0;r<e.length;r++)if(t[n].x===e[r].x&&t[n].y===e[r].y)return!0;return!1},k=function(t,e){var n=t.target,i=t.hit,c=t.shipIsSunk;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("b",{children:"Ships left: "}),e]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("b",{children:"Last move: "}),t?"".concat(n.target):""]}),Object(r.jsx)("div",{children:t?"".concat(i?"Hit!":"Miss.").concat(c?" You have sunk a ".concat([{key:"D",name:"destroyer"},{key:"C",name:"cruiser"},{key:"B",name:"battleship"}].find((function(t){return t.key===i.key})).name,"!"):""):""}),!e&&Object(r.jsx)("div",{children:'You\'ve won! Click "Start New Game" to play again.'})]})};var w=function(){var t=Object(u.c)(p),e=Object(u.c)(x),n=Object(u.c)(O),c=Object(u.b)(),a=Object(i.useState)(""),s=Object(o.a)(a,2),l=s[0],d=s[1],j=["A","B","C","D","E","F","G","H","I","J","K","L"];return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)("button",{onClick:function(){c(y(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{y:8,x:8},e=[];return[{size:4,key:"B"},{size:3,key:"C"},{size:2,key:"D"}].forEach((function(n){for(var r=v(t,n);g(e,r);)r=v(t,n);e.push.apply(e,Object(h.a)(r))})),e}())),d("")},children:"Start New Game"}),Object(r.jsx)("div",{className:"game-body",children:t.length>0?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{children:k(l,e)}),Object(r.jsxs)("table",{children:[Object(r.jsx)("thead",{children:Object(r.jsx)("tr",{children:["-",1,2,3,4,5,6,7,8].map((function(t,e){return Object(r.jsx)("th",{children:t},"x-".concat(e))}))},"dl")})," ",Object(r.jsx)("tbody",{children:n.map((function(n,i){return Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:j[i]},"row-".concat(j[i])),n.map((function(n,a){return Object(r.jsx)("td",{onClick:function(){e&&d(function(t,e,n){var r=t.y,i=t.x,c=e.find((function(t){return t.y===r&&t.x===i})),a=!1;return c?(a=0===e.filter((function(t){return t.key===c.key})).filter((function(t){var e=t.y,n=t.x;return!t.isHit&&!(c.y===e&&c.x===n)})).length,n(b(c))):n(f(t)),{target:t,hit:c,shipIsSunk:a}}({target:"".concat(j[i]).concat(a+1),y:i,x:a},t,c))},children:n},"".concat(i,",").concat(a))}))]},"y-".concat(i))}))})]})]}):Object(r.jsx)(r.Fragment,{})})]})},S=Object(l.a)({reducer:{ships:m}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(u.a,{store:S,children:Object(r.jsx)(w,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[28,1,2]]]);
//# sourceMappingURL=main.a02b1325.chunk.js.map